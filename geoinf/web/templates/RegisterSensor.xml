<?xml version="1.0" encoding="UTF-8"?>
<RegisterSensor service="SOS" version="1.0.0"
 xmlns="http://www.opengis.net/sos/1.0" xmlns:swe="http://www.opengis.net/swe/1.0.1"
 xmlns:ows="http://www.opengeospatial.net/ows" xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc"
 xmlns:om="http://www.opengis.net/om/1.0" xmlns:sml="http://www.opengis.net/sensorML/1.0.1"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://www.opengis.net/sos/1.0
http://schemas.opengis.net/sos/1.0.0/sosRegisterSensor.xsd http://www.opengis.net/om/1.0 http://schemas.opengis.net/om/1.0.0/extensions/observationSpecialization_override.xsd">

 <!-- Sensor Description parameter; Currently, this has to be a sml:System -->
 <SensorDescription>
  <sml:SensorML version="1.0.1">
   <sml:member>
    <sml:System xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

     <!--sml:identification element must contain the ID of the sensor-->
     <sml:identification>
      <sml:IdentifierList>
       <sml:identifier>
        <sml:Term definition="urn:ogc:def:identifier:OGC:uniqueID">
         <sml:value>{{ sensor.ID }}</sml:value>
        </sml:Term>
       </sml:identifier>
      </sml:IdentifierList>
     </sml:identification>

     <!-- sml:capabilities element has to contain status and mobility information -->
     <sml:capabilities>
      <swe:SimpleDataRecord>
       <!-- status whether sensor is collecting data at the moment (true) or not (false) -->
       <swe:field name="status">
        <swe:Boolean>
         <swe:value>{{ sensor.status|default('true') }}</swe:value>
        </swe:Boolean>
       </swe:field>
       <!-- status whether sensor is mobile (true) or fixed (false) -->
       <swe:field name="mobile">
        <swe:Boolean>
         <swe:value>{{ sensor.mobile|default('false') }}</swe:value>
        </swe:Boolean>
        </swe:field>
      </swe:SimpleDataRecord>
     </sml:capabilities>

     <!-- last measured position of sensor -->
     <sml:position name="sensorPosition">
      <swe:Position referenceFrame="{{ sensor.srs|default('urn:ogc:def:crs:EPSG::4326') }}">
       <swe:location>
        <swe:Vector gml:id="STATION_LOCATION">
         {% for coord in coords %}
         <swe:coordinate name="{{ coord.type }}">
          <swe:Quantity>
           <swe:uom code="{{ coord.uom }}" />
           <swe:value>{{ coord.value }}</swe:value>
          </swe:Quantity>
         </swe:coordinate>
         {% endfor %}
        </swe:Vector>
       </swe:location>
      </swe:Position>
     </sml:position>

     <!-- list containing the input phenomena for this sensor system -->
     <sml:inputs>
      <sml:InputList>
      </sml:InputList>
     </sml:inputs>

     <!-- list containing the output phenomena of this sensor system;
      ATTENTION:
      these phenomena are parsed and inserted into the database; they have to contain
      offering elements to determine the correct offering for the sensors and measured
      phenomena -->
     <sml:outputs>
      <sml:OutputList>
      {% for item in components %}{% if item.type == 'Quantity' %}<sml:output name="{{ item.name }}">
       {% endif %}<swe:Quantity definition="{{ item.urn }}">
        {% if item.units %}<swe:uom code="{{ item.units }}" />
       {% endif %}</swe:Quantity>
       </sml:output>
      {% endfor %}
      </sml:OutputList>
     </sml:outputs>
    </sml:System>
   </sml:member>
  </sml:SensorML>
 </SensorDescription>

 <!-- ObservationTemplate parameter; this has to be an empty measurement
  or category at the moment, as the 52N SOS only supports Measurements or CategoryObservations
  to be inserted -->
 <ObservationTemplate>
  <om:Observation>
   <om:samplingTime />
   <om:procedure />
   <om:observedProperty />
   <om:featureOfInterest></om:featureOfInterest>
   <om:result/>
  </om:Observation>
 </ObservationTemplate>
</RegisterSensor>
